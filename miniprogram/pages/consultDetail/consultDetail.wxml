<!--pages/consultDetail/consultDetail.wxml-->
<view class="assistant-page">
  <!-- 功能未完成提示弹窗 -->
  <cloud-tip-modal 
    showTipProps="{{showUnfinishedModal}}" 
    title="功能开发中" 
    content="该功能还未完成，敬请期待！" 
    modalType="center"
    bindclose="onModalClose"
  ></cloud-tip-modal>


  <!-- 助手欢迎语 -->
  <view class="welcome-area">
    <text class="welcome-title">HI~我是“医伴”小助手</text>
    <text class="welcome-desc">你身边的智能陪伴者，可以为你保驾护航</text>
  </view>

  <!-- 示例问题区域 
  <view class="example-area">
    <text class="example-label">你可以这样问</text>
    <view class="example-btn">示例问题1。</view>
    <view class="example-btn">示例问题2</view>
    <view class="example-btn">示例问题3？</view>
  </view>-->

  
  <!-- 对话历史区域 -->
  <scroll-view class="chat-history" scroll-y="true">
    <!-- 消息列表 -->
    <view wx:for="{{messages}}" wx:key="index" class="message {{item.type}}-message">
      <view class="content">
        <text class="text">{{item.content}}</text>
        <!-- 选项区域 -->
        <view wx:if="{{item.options && item.options.length > 0}}" class="options">
          <view wx:for="{{item.options}}" wx:for-item="option" wx:key="option" class="option" bindtap="selectOption">
            {{option}}
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 用户输入区域 -->
  <view class="input-area">
    <textarea 
      class="input-box" 
      placeholder="请描述您的症状..." 
      value="{{userInput}}"
      bindinput="onInputChange"
      auto-height="{{true}}"
      maxlength="500"
      placeholder-style="color:#999;"
    />
    <button class="send-btn" bindtap="sendMessage">发送</button>
  </view>

  <!-- AI问诊流程图 
  <view class="flow-chart-container">
    <view class="flow-chart-title">AI问诊流程</view>
    <view class="flow-chart">
      <view class="flow-step" bindtap="goToStep" data-step="1">
        <view class="step-number">1</view>
        <view class="step-content">
          <view class="step-title">预约挂号</view>
          <view class="step-desc">选择科室和医生</view>
        </view>
      </view>
      <view class="flow-arrow">→</view>
      <view class="flow-step" bindtap="goToStep" data-step="2">
        <view class="step-number">2</view>
        <view class="step-content">
          <view class="step-title">智能导航</view>
          <view class="step-desc">前往就诊科室</view>
        </view>
      </view>
      <view class="flow-arrow">→</view>
      <view class="flow-step" bindtap="goToStep" data-step="3">
        <view class="step-number">3</view>
        <view class="step-content">
          <view class="step-title">药室导航</view>
          <view class="step-desc">取药窗口引导</view>
        </view>
      </view>
    </view>
  </view>
-->
  <!-- 操作按钮区域 -->
  <view class="action-buttons">
    <button class="start-btn" bindtap="startFromBeginning">开始导诊</button>
  </view>

  <!-- 输入区域 -->
  <view class="input-area">
    <image class="voice-icon" src="/images/voice.png" mode="widthFix"></image>
    <input class="input-box" placeholder="你有什么想知道的，快来问问我" />
    <image class="add-icon" src="/images/add.png" mode="widthFix"></image>
  </view>
</view>